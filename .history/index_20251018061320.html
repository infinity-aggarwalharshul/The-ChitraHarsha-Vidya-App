<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The ChitraHarsha Vidya - The Ultimate Learning Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- 3D Library -->
    <script
      async
      src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"
    ></script>
    <script type="importmap">
      {
        "imports": {
          "three": "https://cdn.jsdelivr.net/npm/three@0.157.0/build/three.module.js",
          "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.157.0/examples/jsm/"
        }
      }
    </script>

    <!-- Firebase SDKs -->
    <script type="module">
      /*
        PRODUCTION NOTE: This platform's architecture is designed for deployment on India's National Informatics Centre (NIC) 
        MeghRaj Cloud infrastructure to comply with national data sovereignty regulations. This ensures all user
        data is stored and processed securely within Indian territory under government protocols.
        */
      const firebaseConfig = {
        apiKey: "AIzaSyB...YOUR_API_KEY", // Placeholder for development
        authDomain: "your-project-id.firebaseapp.com",
        projectId: "your-project-id",
        storageBucket: "your-project-id.appspot.com",
        messagingSenderId: "your-sender-id",
        appId: "1:your-sender-id:web:your-app-id",
      };

      try {
        const { initializeApp } = await import(
          "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js"
        );
        window.firebaseApp = initializeApp(firebaseConfig);
      } catch (error) {
        console.error("Firebase initialization failed.", error);
      }
    </script>

    <style>
      :root {
        --glow-color-1: #00ffff; /* Cyan */
        --glow-color-2: #ff00ff; /* Magenta */
        --bg-dark: #0d1117;
      }
      html.dark {
        background-color: var(--bg-dark);
      }
      body {
        font-family: "Inter", sans-serif;
        background-color: var(--bg-dark);
        color: #c9d1d9;
      }
      .hero-bg {
        background: radial-gradient(
          ellipse at bottom,
          #1b2735 0%,
          #090a0f 100%
        );
        position: relative;
        overflow: hidden;
      }
      .glow-effect {
        box-shadow: 0 0 5px var(--glow-color-1), 0 0 10px var(--glow-color-1),
          0 0 15px var(--glow-color-2);
        transition: all 0.3s ease-in-out;
      }
      .glow-effect:hover {
        box-shadow: 0 0 10px var(--glow-color-1), 0 0 20px var(--glow-color-1),
          0 0 30px var(--glow-color-2);
        transform: scale(1.03);
      }
      .text-glow {
        text-shadow: 0 0 8px var(--glow-color-1);
      }
      .card-bg {
        background-color: rgba(22, 27, 34, 0.8);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(139, 148, 158, 0.2);
      }
      .modal-bg {
        background-color: rgba(13, 17, 23, 0.9);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(139, 148, 158, 0.3);
      }
      .hamburger-icon {
        width: 30px;
        height: 25px;
        position: relative;
        cursor: pointer;
      }
      .hamburger-icon div {
        position: absolute;
        height: 3px;
        width: 100%;
        background-color: var(--glow-color-1);
        border-radius: 3px;
        transition: all 0.3s ease-in-out;
      }
      .hamburger-icon .line1 {
        top: 0;
      }
      .hamburger-icon .line2 {
        top: 50%;
        transform: translateY(-50%);
      }
      .hamburger-icon .line3 {
        bottom: 0;
      }
      .hamburger-icon.open .line1 {
        transform: rotate(45deg);
        top: 50%;
      }
      .hamburger-icon.open .line2 {
        opacity: 0;
      }
      .hamburger-icon.open .line3 {
        transform: rotate(-45deg);
        bottom: 50%;
      }
      #d-viewer-container canvas {
        width: 100% !important;
        height: 100% !important;
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header class="sticky top-0 z-50 card-bg">
      <nav
        class="container mx-auto px-6 py-4 flex justify-between items-center"
      >
        <a href="#" class="text-2xl font-bold text-glow"
          >The ChitraHarsha Vidya</a
        >
        <div id="menu-container" class="relative">
          <button id="menu-btn" class="hamburger-icon z-[60]">
            <div class="line1"></div>
            <div class="line2"></div>
            <div class="line3"></div>
          </button>
          <div
            id="vidya-path-menu"
            class="hidden absolute top-full right-0 mt-4 w-64 card-bg rounded-lg p-4 shadow-lg"
          >
            <h3 class="font-bold text-lg text-glow mb-4 text-center">
              Vidya-Path
            </h3>
            <div class="flex flex-col space-y-3">
              <a
                href="#home"
                class="menu-link text-gray-300 hover:text-white flex items-center gap-3"
                ><i class="fas fa-home w-5"></i> Home</a
              >
              <a
                href="#innovation-sandbox"
                class="menu-link text-gray-300 hover:text-white flex items-center gap-3"
                ><i class="fas fa-flask w-5"></i> Innovation Sandbox</a
              >
              <a
                href="#live-session"
                class="menu-link text-gray-300 hover:text-white flex items-center gap-3"
                ><i class="fas fa-headset w-5"></i> Vidya Live</a
              >
              <a
                href="#global-courses"
                class="menu-link text-gray-300 hover:text-white flex items-center gap-3"
                ><i class="fas fa-globe w-5"></i> Global Courses</a
              >
              <button
                id="menu-login-btn"
                class="w-full bg-cyan-400 text-black font-bold py-2 rounded-full glow-effect mt-2"
              >
                Get Started
              </button>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main>
      <!-- Hero Section -->
      <section id="home" class="hero-bg text-white">
        <!-- Content remains the same -->
      </section>

      <!-- Innovation Sandbox Section -->
      <section id="innovation-sandbox" class="py-20">
        <div class="container mx-auto px-6">
          <h2 class="text-4xl font-bold text-center mb-4 text-glow">
            The Innovation Sandbox
          </h2>
          <p class="text-center text-gray-400 mb-10 max-w-2xl mx-auto">
            Solve real-world problems. Showcase your talent. Collaborate with
            industry leaders on challenges in 3D design, data analytics, and
            more.
          </p>
          <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- 3D Modeling Challenge -->
            <div class="card-bg p-6 rounded-lg glow-effect flex flex-col">
              <i class="fas fa-cube text-3xl text-cyan-400 mb-4"></i>
              <h3 class="text-xl font-bold">Challenge: Aerospace Design</h3>
              <p class="text-gray-400 my-2 flex-grow">
                Design a next-generation drone chassis component using our 3D
                modeling tool.
              </p>
              <span class="text-sm text-gray-500">Sponsored by: </span>
              <button
                onclick="window.app.show3DChallenge()"
                class="w-full bg-cyan-400 text-black font-bold py-2 rounded-full mt-4"
              >
                Accept Challenge
              </button>
            </div>
            <!-- Data Analytics Challenge -->
            <div class="card-bg p-6 rounded-lg glow-effect flex flex-col">
              <i class="fas fa-chart-line text-3xl text-cyan-400 mb-4"></i>
              <h3 class="text-xl font-bold">Challenge: Market Analysis</h3>
              <p class="text-gray-400 my-2 flex-grow">
                Analyze a sample dataset to predict consumer trends for a new
                tech product.
              </p>
              <span class="text-sm text-gray-500">Sponsored by: </span>
              <button
                onclick="window.app.showDataChallenge()"
                class="w-full bg-cyan-400 text-black font-bold py-2 rounded-full mt-4"
              >
                Accept Challenge
              </button>
            </div>
            <!-- Mentorship Opportunity -->
            <div class="card-bg p-6 rounded-lg glow-effect flex flex-col">
              <i class="fas fa-users text-3xl text-cyan-400 mb-4"></i>
              <h3 class="text-xl font-bold">Become a Mentor</h3>
              <p class="text-gray-400 my-2 flex-grow">
                Are you a professional? Guide the next generation of innovators
                and showcase your expertise.
              </p>
              <span class="text-sm text-gray-500"
                >Opportunity for Registered Professionals</span
              >
              <button
                onclick="window.app.showLogin()"
                class="w-full bg-cyan-400 text-black font-bold py-2 rounded-full mt-4"
              >
                Register Now
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- Vidya Live Sessions Section -->
      <section id="live-session" class="py-20">
        <div class="container mx-auto px-6 text-center">
          <h2 class="text-4xl font-bold text-center mb-4 text-glow">
            Vidya Live Sessions
          </h2>
          <p class="text-center text-gray-400 mb-10 max-w-2xl mx-auto">
            Experience hyper-realistic conversations with our AI tutor. Speak,
            type, or upload an image of a problem for instant, interactive help.
          </p>

          <div class="max-w-3xl mx-auto card-bg p-8 rounded-2xl">
            <div class="text-left text-gray-300 mb-6">
              <p class="font-semibold text-cyan-400">
                AI> Welcome to your Vidya Live session.
              </p>
              <p>How can I assist you today? Feel free to ask me anything.</p>
            </div>
            <button
              onclick="window.app.showLiveSession()"
              class="w-full bg-cyan-400 text-black font-bold py-3 rounded-full glow-effect"
            >
              <i class="fas fa-headset mr-2"></i> Start a Live Session
            </button>
          </div>
        </div>
      </section>

      <!-- Other sections (Global Courses, School Curriculum) -->
    </main>

    <!-- Footer -->
    <footer class="bg-black text-white py-10">
      <div class="container mx-auto px-6 text-center text-gray-400">
        <p>&copy; 2025 The ChitraHarsha Vidya. All Rights Reserved.</p>
        <p class="text-sm mt-2">
          Securely hosted on India's NIC MeghRaj Cloud Infrastructure in
          compliance with all national regulations.
        </p>
      </div>
    </footer>

    <!-- Universal Modal -->
    <div
      id="auth-modal"
      class="fixed inset-0 bg-black/80 flex items-center justify-center z-[100] hidden p-4"
    >
      <div
        id="modal-content-area"
        class="modal-bg rounded-2xl shadow-xl w-full max-w-md"
      >
        <!-- Modal Content will be injected here by JS -->
      </div>
    </div>

    <script type="module">
      import * as THREE from "three";
      import { OrbitControls } from "three/addons/controls/OrbitControls.js";

      document.addEventListener("DOMContentLoaded", () => {
        const App = {
          // ... (Core properties)
          threeRenderer: null,
          threeAnimationId: null,

          init() {
            this.setupMenu();
            // All other event listeners can be set up here
          },

          setupMenu() {
            const menuBtn = document.getElementById("menu-btn");
            const vidyaPathMenu = document.getElementById("vidya-path-menu");
            menuBtn.addEventListener("click", (e) => {
              e.stopPropagation();
              menuBtn.classList.toggle("open");
              vidyaPathMenu.classList.toggle("hidden");
            });
            vidyaPathMenu
              .querySelectorAll(".menu-link, #menu-login-btn")
              .forEach((link) => {
                link.addEventListener("click", () => {
                  menuBtn.classList.remove("open");
                  vidyaPathMenu.classList.add("hidden");
                });
              });
            document
              .getElementById("menu-login-btn")
              .addEventListener("click", () => this.showLogin());
            document.addEventListener("click", (e) => {
              if (
                !document.getElementById("menu-container").contains(e.target)
              ) {
                menuBtn.classList.remove("open");
                vidyaPathMenu.classList.add("hidden");
              }
            });
          },

          openModal(title, content, size = "md") {
            const modal = document.getElementById("auth-modal");
            const modalContent = document.getElementById("modal-content-area");
            modalContent.className = `modal-bg rounded-2xl shadow-xl w-full max-w-${size}`;
            modalContent.innerHTML = `
                        <div class="p-6 sm:p-8 relative">
                            <button onclick="window.app.closeModal()" class="absolute top-4 right-4 text-gray-500 hover:text-white text-2xl z-10">&times;</button>
                            <div id="modal-body">${content}</div>
                        </div>
                    `;
            modal.classList.remove("hidden");
          },

          closeModal() {
            if (this.threeAnimationId) {
              cancelAnimationFrame(this.threeAnimationId);
              this.threeAnimationId = null;
              this.threeRenderer.dispose();
            }
            document.getElementById("auth-modal").classList.add("hidden");
          },

          show3DChallenge() {
            const content = `
                        <h3 class="text-2xl font-bold mb-4 text-glow text-center">3D Design Sandbox</h3>
                        <div id="d-viewer-container" class="w-full h-96 bg-black rounded-lg relative">
                            <p class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-gray-500">Loading 3D Environment...</p>
                        </div>
                        <p class="text-sm text-gray-400 mt-4 text-center">Use your mouse to rotate, pan, and zoom the object.</p>
                    `;
            this.openModal("3D Challenge", content, "3xl");
            this.init3DViewer();
          },

          init3DViewer() {
            const container = document.getElementById("d-viewer-container");
            if (!container) return;
            container.innerHTML = ""; // Clear loading text

            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(
              75,
              container.clientWidth / container.clientHeight,
              0.1,
              1000
            );
            camera.position.z = 5;

            this.threeRenderer = new THREE.WebGLRenderer({ antialias: true });
            this.threeRenderer.setSize(
              container.clientWidth,
              container.clientHeight
            );
            this.threeRenderer.setPixelRatio(window.devicePixelRatio);
            container.appendChild(this.threeRenderer.domElement);

            const controls = new OrbitControls(
              camera,
              this.threeRenderer.domElement
            );
            controls.enableDamping = true;

            const geometry = new THREE.BoxGeometry(1.5, 1.5, 1.5);
            const material = new THREE.MeshStandardMaterial({
              color: 0x00ffff,
              emissive: 0x00ffff,
              emissiveIntensity: 0.2,
              metalness: 0.5,
              roughness: 0.4,
            });
            const cube = new THREE.Mesh(geometry, material);
            scene.add(cube);

            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);
            const pointLight = new THREE.PointLight(0xffffff, 1);
            pointLight.position.set(5, 5, 5);
            scene.add(pointLight);

            const animate = () => {
              this.threeAnimationId = requestAnimationFrame(animate);
              cube.rotation.x += 0.005;
              cube.rotation.y += 0.005;
              controls.update();
              this.threeRenderer.render(scene, camera);
            };
            animate();

            window.addEventListener("resize", () => {
              camera.aspect = container.clientWidth / container.clientHeight;
              camera.updateProjectionMatrix();
              this.threeRenderer.setSize(
                container.clientWidth,
                container.clientHeight
              );
            });
          },

          showDataChallenge() {
            this.openModal(
              "Data Challenge",
              '<p class="text-center">This is where a data analysis challenge would be presented, perhaps with sample data and objectives.</p>'
            );
          },

          showLiveSession() {
            const content = `
                        <h3 class="text-2xl font-bold mb-4 text-glow text-center">Vidya Live Session</h3>
                        <div class="flex flex-col h-[60vh]">
                            <div id="live-chat-area" class="flex-grow space-y-4 overflow-y-auto pr-2 text-sm text-left">
                                <!-- Chat bubbles -->
                            </div>
                            <div class="mt-4 flex gap-2 items-center">
                                <button class="text-cyan-400 text-xl"><i class="fas fa-microphone-alt"></i></button>
                                <input id="live-session-input" type="text" placeholder="Speak or type your query..." class="flex-grow bg-gray-800 border border-gray-600 rounded-lg p-3 text-white">
                                <button class="text-cyan-400 text-xl"><i class="fas fa-camera"></i></button>
                                <button id="live-session-send" class="bg-cyan-400 text-black px-5 py-3 rounded-lg font-bold"><i class="fas fa-paper-plane"></i></button>
                            </div>
                        </div>
                    `;
            this.openModal("Live Session", content, "lg");
            // Add chat functionality here
          },

          showPaymentOptions() {
            this.openModal("Payment Options", "..."); // Payment options UI from previous step
          },

          showLogin() {
            this.openModal("Login", "..."); // Login UI from previous step
          },
        };

        window.app = App;
        window.app.init();
      });
    </script>
  </body>
</html>
